{"title":"Hexo博客 | 视频点播页面，如何在博客上优雅地展示B站等平台视频","slug":"博客相关-视频点播页面","date":"2022-05-04T02:26:47.000Z","updated":"2022-05-04T02:26:47.000Z","comments":true,"path":"api/articles/博客相关-视频点播页面.json","excerpt":null,"covers":["https://unpkg.com/justlovesmile-img/20220504105540.png","https://unpkg.com/justlovesmile-img/20220504110304.png"],"content":"<blockquote>\n<p>之前考虑到自己剪了一些vlog，但是直接用<code>iframe</code>嵌入的话页面会很长，而且点开这个页面会自动加载全部视频，感觉很奇怪，并且不能很好的展示，于是写了一个视频点播页面</p>\n</blockquote>\n<h2 id=\"1-新建路径页面\"><a href=\"#1-新建路径页面\" class=\"headerlink\" title=\"1. 新建路径页面\"></a>1. 新建路径页面</h2><p>首先使用命令新建一个页面：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page video</span><br></pre></td></tr></table></figure>\n\n<p>在<code>index.md</code>里面写入一下内容：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: 我的视频</span><br><span class=\"line\">date: 2020-07-17 20:54:09</span><br><span class=\"line\">comment: true</span><br><span class=\"line\">top_img: false</span><br><span class=\"line\">showToc: true</span><br><span class=\"line\">aside: false</span><br><span class=\"line\">type: &quot;video&quot;</span><br><span class=\"line\">---</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://unpkg.com/jquery@latest/dist/jquery.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selectVideo</span>(<span class=\"params\">id</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> src=$(<span class=\"string\">&quot;#video-item-&quot;</span>+id).attr(<span class=\"string\">&quot;data-src&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    $(<span class=\"string\">&quot;#video-select&quot;</span>).html(<span class=\"string\">&quot;&lt;iframe id=&#x27;video-iframe&#x27; src=&#x27;&quot;</span>+src+<span class=\"string\">&quot;&#x27; scrolling=&#x27;no&#x27; border=&#x27;0&#x27; frameborder=&#x27;no&#x27; framespacing=&#x27;0&#x27; allowfullscreen=&#x27;true&#x27;&gt; &lt;/iframe&gt;&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> iframe = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;video-select&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">if</span>(iframe.attachEvent)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      iframe.attachEvent(<span class=\"string\">&quot;onreadystatechange&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span> (iframe.readyState === <span class=\"string\">&quot;complete&quot;</span> || iframe.readyState == <span class=\"string\">&quot;loaded&quot;</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          iframe.detachEvent(<span class=\"string\">&quot;onreadystatechange&quot;</span>, <span class=\"built_in\">arguments</span>.callee);</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.getElementsByClassName(<span class=\"string\">&#x27;video-mirror&#x27;</span>).length&gt;<span class=\"number\">0</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;1true&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">          $(<span class=\"string\">&quot;.video-mirror&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;transform:scaleX(-1);&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">          &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">      &#125;);</span></span><br><span class=\"line\"><span class=\"javascript\">    &#125;<span class=\"keyword\">else</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      iframe.addEventListener(<span class=\"string\">&quot;load&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">this</span>.removeEventListener(<span class=\"string\">&quot;load&quot;</span>, <span class=\"built_in\">arguments</span>.call, <span class=\"literal\">false</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.getElementsByClassName(<span class=\"string\">&#x27;video-mirror&#x27;</span>).length&gt;<span class=\"number\">0</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;2true&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        $(<span class=\"string\">&quot;.video-mirror&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;transform:scaleX(-1);&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">      &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">      &#125;, <span class=\"literal\">false</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">$(<span class=\"built_in\">document</span>).ready(selectVideo(<span class=\"number\">0</span>));</span></span><br><span class=\"line\"><span class=\"javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-新建主题页面\"><a href=\"#2-新建主题页面\" class=\"headerlink\" title=\"2. 新建主题页面\"></a>2. 新建主题页面</h2><p>在主题路径<code>themes\\butterfly-dev\\layout\\includes\\page</code>下新建<code>video.pug</code>：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//if top_img === false</span><br><span class=\"line\">//  h1.page-title= page.title</span><br><span class=\"line\">#video-select.video-select</span><br><span class=\"line\">hr</span><br><span class=\"line\">h3= 视频列表</span><br><span class=\"line\">.videos</span><br><span class=\"line\">  if site.data.video</span><br><span class=\"line\">    each i,index in site.data.video</span><br><span class=\"line\">      div(class=&quot;myvideo&quot; onclick=`javascipt:selectVideo(`+index+`)`)</span><br><span class=\"line\">        div(id=`video-item-`+index class=&quot;video-item&quot; data-src=url_for(i.link))</span><br><span class=\"line\">          a(href=&quot;#video-select&quot;)</span><br><span class=\"line\">            img.video-item-cover(src=url_for(i.cover))</span><br><span class=\"line\">        .video-desc</span><br><span class=\"line\">          .video-title</span><br><span class=\"line\">            a(href=&quot;#video-select&quot;)= i.title</span><br><span class=\"line\">          .video-info= i.description</span><br><span class=\"line\"></span><br><span class=\"line\">style.</span><br><span class=\"line\">  .videos&#123;</span><br><span class=\"line\">    display: grid;</span><br><span class=\"line\">    grid-template-columns: repeat(4, 1fr);</span><br><span class=\"line\">    grid-column-gap: 20px;</span><br><span class=\"line\">    grid-row-gap: 20px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  @media screen and (max-width: 1200px)&#123;</span><br><span class=\"line\">    .videos&#123;</span><br><span class=\"line\">      display: grid;</span><br><span class=\"line\">      grid-template-columns: repeat(3, 1fr);</span><br><span class=\"line\">      grid-column-gap: 20px;</span><br><span class=\"line\">      grid-row-gap: 20px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  @media screen and (max-width: 900px)&#123;</span><br><span class=\"line\">    .videos&#123;</span><br><span class=\"line\">      display: grid;</span><br><span class=\"line\">      grid-template-columns: repeat(2, 1fr);</span><br><span class=\"line\">      grid-column-gap: 20px;</span><br><span class=\"line\">      grid-row-gap: 20px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  @media screen and (max-width: 600px)&#123;</span><br><span class=\"line\">    .videos&#123;</span><br><span class=\"line\">      display: grid;</span><br><span class=\"line\">      grid-template-columns: repeat(1, 1fr);</span><br><span class=\"line\">      grid-column-gap: 20px;</span><br><span class=\"line\">      grid-row-gap: 20px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .myvideo&#123;</span><br><span class=\"line\">    position: relative;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    border: 1px solid var(--mj-card-border);</span><br><span class=\"line\">    border-radius: 12px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .video-item&#123;</span><br><span class=\"line\">    overflow: hidden;</span><br><span class=\"line\">    height: 160px;</span><br><span class=\"line\">    border-top-left-radius: 12px;</span><br><span class=\"line\">    border-top-right-radius: 12px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .video-item img &#123;</span><br><span class=\"line\">    position: relative;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    margin: 0 !important;</span><br><span class=\"line\">    height: 100%;</span><br><span class=\"line\">    transform: scale(1.0);</span><br><span class=\"line\">    transition: .3s;</span><br><span class=\"line\">    object-fit: cover;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .myvideo:hover .video-item img &#123;</span><br><span class=\"line\">    transition: .3s;</span><br><span class=\"line\">    transform: scale(1.1);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .video-title&#123;</span><br><span class=\"line\">    padding: 5px 10px;</span><br><span class=\"line\">    font-size: 18px;</span><br><span class=\"line\">    font-weight: bold;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .video-info&#123;</span><br><span class=\"line\">    font-size: 14px;</span><br><span class=\"line\">    padding: 0 10px;</span><br><span class=\"line\">    color: var(--mj-secondtext);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .video-select&#123;</span><br><span class=\"line\">    position:relative;</span><br><span class=\"line\">    width:100%;</span><br><span class=\"line\">    height:0;</span><br><span class=\"line\">    padding-bottom:75%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .video-select iframe&#123;</span><br><span class=\"line\">    position:absolute;</span><br><span class=\"line\">    width:100%;</span><br><span class=\"line\">    height:100%;</span><br><span class=\"line\">    left:0;</span><br><span class=\"line\">    top:0;</span><br><span class=\"line\">    border-radius: 12px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">!= page.content</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-注册video页面\"><a href=\"#3-注册video页面\" class=\"headerlink\" title=\"3. 注册video页面\"></a>3. 注册video页面</h2><p>在主题路径<code>butterfly/layout/</code>的<code>page.pug</code>文件中注册上述页面模板：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extends includes/layout.pug</span><br><span class=\"line\"></span><br><span class=\"line\">block content</span><br><span class=\"line\">  #page</span><br><span class=\"line\">    if top_img === false</span><br><span class=\"line\">      h1.page-title= page.title</span><br><span class=\"line\"></span><br><span class=\"line\">    case page.type</span><br><span class=\"line\">      when &#x27;tags&#x27;</span><br><span class=\"line\">        include includes/page/tags.pug</span><br><span class=\"line\">      when &#x27;link&#x27;</span><br><span class=\"line\">        include includes/page/flink.pug</span><br><span class=\"line\">      when &#x27;categories&#x27;</span><br><span class=\"line\">        include includes/page/categories.pug</span><br><span class=\"line\">+     when &#x27;video&#x27;</span><br><span class=\"line\">+       include includes/page/video.pug</span><br><span class=\"line\">      default</span><br><span class=\"line\">        include includes/page/default-page.pug</span><br><span class=\"line\"></span><br><span class=\"line\">    if page.comments !== false &amp;&amp; theme.comments &amp;&amp; theme.comments.use</span><br><span class=\"line\">      - var commentsJsLoad = true</span><br><span class=\"line\">      !=partial(&#x27;includes/third-party/comments/index&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"4-获取B站等平台视频嵌入代码\"><a href=\"#4-获取B站等平台视频嵌入代码\" class=\"headerlink\" title=\"4. 获取B站等平台视频嵌入代码\"></a>4. 获取B站等平台视频嵌入代码</h2><p>在视频播放页面通常会有分享按钮，并且一般会提供链接和<code>iframe</code>嵌入两种分享方式，例如我的（顺便求一波<a href=\"https://www.bilibili.com/video/BV18T4y1D7wj?zw\">关注</a>）：<br><img src=\"https://unpkg.com/justlovesmile-img/20220504105540.png\"></p>\n<p>复制<code>iframe</code>代码，如下：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">iframe</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;//player.bilibili.com/player.html?aid=937145035&amp;bvid=BV18T4y1D7wj&amp;cid=545915013&amp;page=1&quot;</span> <span class=\"attr\">scrolling</span>=<span class=\"string\">&quot;no&quot;</span> <span class=\"attr\">border</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">frameborder</span>=<span class=\"string\">&quot;no&quot;</span> <span class=\"attr\">framespacing</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">allowfullscreen</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span> <span class=\"tag\">&lt;/<span class=\"name\">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-新建data文件\"><a href=\"#5-新建data文件\" class=\"headerlink\" title=\"5. 新建data文件\"></a>5. 新建data文件</h2><p>在<code>hexo\\source\\_data</code>路径下(没有就创建一个文件夹)新建一个数据文件<code>video.yml</code>，把刚才的<code>iframe</code>代码内容转换成：</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">cover:</span> <span class=\"string\">https://unpkg.com/justlovesmile-img/33f7ad7c55b5df1e5bdb6a6ea3eb35b.jpg</span></span><br><span class=\"line\">  <span class=\"attr\">time:</span> <span class=\"number\">2022</span><span class=\"string\">/03/10</span></span><br><span class=\"line\">  <span class=\"attr\">link:</span> <span class=\"string\">//player.bilibili.com/player.html?aid=937145035&amp;bvid=BV18T4y1D7wj&amp;cid=545915013&amp;page=1</span></span><br><span class=\"line\">  <span class=\"attr\">title:</span> <span class=\"string\">雷神池，璃月雷神前来报道</span></span><br><span class=\"line\">  <span class=\"attr\">description:</span> <span class=\"string\">【原神】20220310</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-结语\"><a href=\"#6-结语\" class=\"headerlink\" title=\"6. 结语\"></a>6. 结语</h2><p>至此，一个视频点播页面就做好了，该方法适用于一切提供iframe嵌入的视频平台，页面展示如下：</p>\n<p><img src=\"https://unpkg.com/justlovesmile-img/20220504110304.png\"></p>\n","more":"<blockquote>\n<p>之前考虑到自己剪了一些vlog，但是直接用<code>iframe</code>嵌入的话页面会很长，而且点开这个页面会自动加载全部视频，感觉很奇怪，并且不能很好的展示，于是写了一个视频点播页面</p>\n</blockquote>\n<h2 id=\"1-新建路径页面\"><a href=\"#1-新建路径页面\" class=\"headerlink\" title=\"1. 新建路径页面\"></a>1. 新建路径页面</h2><p>首先使用命令新建一个页面：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page video</span><br></pre></td></tr></table></figure>\n\n<p>在<code>index.md</code>里面写入一下内容：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: 我的视频</span><br><span class=\"line\">date: 2020-07-17 20:54:09</span><br><span class=\"line\">comment: true</span><br><span class=\"line\">top_img: false</span><br><span class=\"line\">showToc: true</span><br><span class=\"line\">aside: false</span><br><span class=\"line\">type: &quot;video&quot;</span><br><span class=\"line\">---</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://unpkg.com/jquery@latest/dist/jquery.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selectVideo</span>(<span class=\"params\">id</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> src=$(<span class=\"string\">&quot;#video-item-&quot;</span>+id).attr(<span class=\"string\">&quot;data-src&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    $(<span class=\"string\">&quot;#video-select&quot;</span>).html(<span class=\"string\">&quot;&lt;iframe id=&#x27;video-iframe&#x27; src=&#x27;&quot;</span>+src+<span class=\"string\">&quot;&#x27; scrolling=&#x27;no&#x27; border=&#x27;0&#x27; frameborder=&#x27;no&#x27; framespacing=&#x27;0&#x27; allowfullscreen=&#x27;true&#x27;&gt; &lt;/iframe&gt;&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> iframe = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;video-select&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">if</span>(iframe.attachEvent)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      iframe.attachEvent(<span class=\"string\">&quot;onreadystatechange&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span> (iframe.readyState === <span class=\"string\">&quot;complete&quot;</span> || iframe.readyState == <span class=\"string\">&quot;loaded&quot;</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          iframe.detachEvent(<span class=\"string\">&quot;onreadystatechange&quot;</span>, <span class=\"built_in\">arguments</span>.callee);</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.getElementsByClassName(<span class=\"string\">&#x27;video-mirror&#x27;</span>).length&gt;<span class=\"number\">0</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;1true&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">          $(<span class=\"string\">&quot;.video-mirror&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;transform:scaleX(-1);&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">          &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">      &#125;);</span></span><br><span class=\"line\"><span class=\"javascript\">    &#125;<span class=\"keyword\">else</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      iframe.addEventListener(<span class=\"string\">&quot;load&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">this</span>.removeEventListener(<span class=\"string\">&quot;load&quot;</span>, <span class=\"built_in\">arguments</span>.call, <span class=\"literal\">false</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.getElementsByClassName(<span class=\"string\">&#x27;video-mirror&#x27;</span>).length&gt;<span class=\"number\">0</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;2true&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        $(<span class=\"string\">&quot;.video-mirror&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;transform:scaleX(-1);&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">      &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">      &#125;, <span class=\"literal\">false</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">$(<span class=\"built_in\">document</span>).ready(selectVideo(<span class=\"number\">0</span>));</span></span><br><span class=\"line\"><span class=\"javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-新建主题页面\"><a href=\"#2-新建主题页面\" class=\"headerlink\" title=\"2. 新建主题页面\"></a>2. 新建主题页面</h2><p>在主题路径<code>themes\\butterfly-dev\\layout\\includes\\page</code>下新建<code>video.pug</code>：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//if top_img === false</span><br><span class=\"line\">//  h1.page-title= page.title</span><br><span class=\"line\">#video-select.video-select</span><br><span class=\"line\">hr</span><br><span class=\"line\">h3= 视频列表</span><br><span class=\"line\">.videos</span><br><span class=\"line\">  if site.data.video</span><br><span class=\"line\">    each i,index in site.data.video</span><br><span class=\"line\">      div(class=&quot;myvideo&quot; onclick=`javascipt:selectVideo(`+index+`)`)</span><br><span class=\"line\">        div(id=`video-item-`+index class=&quot;video-item&quot; data-src=url_for(i.link))</span><br><span class=\"line\">          a(href=&quot;#video-select&quot;)</span><br><span class=\"line\">            img.video-item-cover(src=url_for(i.cover))</span><br><span class=\"line\">        .video-desc</span><br><span class=\"line\">          .video-title</span><br><span class=\"line\">            a(href=&quot;#video-select&quot;)= i.title</span><br><span class=\"line\">          .video-info= i.description</span><br><span class=\"line\"></span><br><span class=\"line\">style.</span><br><span class=\"line\">  .videos&#123;</span><br><span class=\"line\">    display: grid;</span><br><span class=\"line\">    grid-template-columns: repeat(4, 1fr);</span><br><span class=\"line\">    grid-column-gap: 20px;</span><br><span class=\"line\">    grid-row-gap: 20px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  @media screen and (max-width: 1200px)&#123;</span><br><span class=\"line\">    .videos&#123;</span><br><span class=\"line\">      display: grid;</span><br><span class=\"line\">      grid-template-columns: repeat(3, 1fr);</span><br><span class=\"line\">      grid-column-gap: 20px;</span><br><span class=\"line\">      grid-row-gap: 20px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  @media screen and (max-width: 900px)&#123;</span><br><span class=\"line\">    .videos&#123;</span><br><span class=\"line\">      display: grid;</span><br><span class=\"line\">      grid-template-columns: repeat(2, 1fr);</span><br><span class=\"line\">      grid-column-gap: 20px;</span><br><span class=\"line\">      grid-row-gap: 20px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  @media screen and (max-width: 600px)&#123;</span><br><span class=\"line\">    .videos&#123;</span><br><span class=\"line\">      display: grid;</span><br><span class=\"line\">      grid-template-columns: repeat(1, 1fr);</span><br><span class=\"line\">      grid-column-gap: 20px;</span><br><span class=\"line\">      grid-row-gap: 20px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .myvideo&#123;</span><br><span class=\"line\">    position: relative;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    border: 1px solid var(--mj-card-border);</span><br><span class=\"line\">    border-radius: 12px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .video-item&#123;</span><br><span class=\"line\">    overflow: hidden;</span><br><span class=\"line\">    height: 160px;</span><br><span class=\"line\">    border-top-left-radius: 12px;</span><br><span class=\"line\">    border-top-right-radius: 12px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .video-item img &#123;</span><br><span class=\"line\">    position: relative;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    margin: 0 !important;</span><br><span class=\"line\">    height: 100%;</span><br><span class=\"line\">    transform: scale(1.0);</span><br><span class=\"line\">    transition: .3s;</span><br><span class=\"line\">    object-fit: cover;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .myvideo:hover .video-item img &#123;</span><br><span class=\"line\">    transition: .3s;</span><br><span class=\"line\">    transform: scale(1.1);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .video-title&#123;</span><br><span class=\"line\">    padding: 5px 10px;</span><br><span class=\"line\">    font-size: 18px;</span><br><span class=\"line\">    font-weight: bold;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .video-info&#123;</span><br><span class=\"line\">    font-size: 14px;</span><br><span class=\"line\">    padding: 0 10px;</span><br><span class=\"line\">    color: var(--mj-secondtext);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .video-select&#123;</span><br><span class=\"line\">    position:relative;</span><br><span class=\"line\">    width:100%;</span><br><span class=\"line\">    height:0;</span><br><span class=\"line\">    padding-bottom:75%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .video-select iframe&#123;</span><br><span class=\"line\">    position:absolute;</span><br><span class=\"line\">    width:100%;</span><br><span class=\"line\">    height:100%;</span><br><span class=\"line\">    left:0;</span><br><span class=\"line\">    top:0;</span><br><span class=\"line\">    border-radius: 12px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">!= page.content</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-注册video页面\"><a href=\"#3-注册video页面\" class=\"headerlink\" title=\"3. 注册video页面\"></a>3. 注册video页面</h2><p>在主题路径<code>butterfly/layout/</code>的<code>page.pug</code>文件中注册上述页面模板：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extends includes/layout.pug</span><br><span class=\"line\"></span><br><span class=\"line\">block content</span><br><span class=\"line\">  #page</span><br><span class=\"line\">    if top_img === false</span><br><span class=\"line\">      h1.page-title= page.title</span><br><span class=\"line\"></span><br><span class=\"line\">    case page.type</span><br><span class=\"line\">      when &#x27;tags&#x27;</span><br><span class=\"line\">        include includes/page/tags.pug</span><br><span class=\"line\">      when &#x27;link&#x27;</span><br><span class=\"line\">        include includes/page/flink.pug</span><br><span class=\"line\">      when &#x27;categories&#x27;</span><br><span class=\"line\">        include includes/page/categories.pug</span><br><span class=\"line\">+     when &#x27;video&#x27;</span><br><span class=\"line\">+       include includes/page/video.pug</span><br><span class=\"line\">      default</span><br><span class=\"line\">        include includes/page/default-page.pug</span><br><span class=\"line\"></span><br><span class=\"line\">    if page.comments !== false &amp;&amp; theme.comments &amp;&amp; theme.comments.use</span><br><span class=\"line\">      - var commentsJsLoad = true</span><br><span class=\"line\">      !=partial(&#x27;includes/third-party/comments/index&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"4-获取B站等平台视频嵌入代码\"><a href=\"#4-获取B站等平台视频嵌入代码\" class=\"headerlink\" title=\"4. 获取B站等平台视频嵌入代码\"></a>4. 获取B站等平台视频嵌入代码</h2><p>在视频播放页面通常会有分享按钮，并且一般会提供链接和<code>iframe</code>嵌入两种分享方式，例如我的（顺便求一波<a href=\"https://www.bilibili.com/video/BV18T4y1D7wj?zw\">关注</a>）：<br><img src=\"https://unpkg.com/justlovesmile-img/20220504105540.png\"></p>\n<p>复制<code>iframe</code>代码，如下：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">iframe</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;//player.bilibili.com/player.html?aid=937145035&amp;bvid=BV18T4y1D7wj&amp;cid=545915013&amp;page=1&quot;</span> <span class=\"attr\">scrolling</span>=<span class=\"string\">&quot;no&quot;</span> <span class=\"attr\">border</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">frameborder</span>=<span class=\"string\">&quot;no&quot;</span> <span class=\"attr\">framespacing</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">allowfullscreen</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span> <span class=\"tag\">&lt;/<span class=\"name\">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-新建data文件\"><a href=\"#5-新建data文件\" class=\"headerlink\" title=\"5. 新建data文件\"></a>5. 新建data文件</h2><p>在<code>hexo\\source\\_data</code>路径下(没有就创建一个文件夹)新建一个数据文件<code>video.yml</code>，把刚才的<code>iframe</code>代码内容转换成：</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">cover:</span> <span class=\"string\">https://unpkg.com/justlovesmile-img/33f7ad7c55b5df1e5bdb6a6ea3eb35b.jpg</span></span><br><span class=\"line\">  <span class=\"attr\">time:</span> <span class=\"number\">2022</span><span class=\"string\">/03/10</span></span><br><span class=\"line\">  <span class=\"attr\">link:</span> <span class=\"string\">//player.bilibili.com/player.html?aid=937145035&amp;bvid=BV18T4y1D7wj&amp;cid=545915013&amp;page=1</span></span><br><span class=\"line\">  <span class=\"attr\">title:</span> <span class=\"string\">雷神池，璃月雷神前来报道</span></span><br><span class=\"line\">  <span class=\"attr\">description:</span> <span class=\"string\">【原神】20220310</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-结语\"><a href=\"#6-结语\" class=\"headerlink\" title=\"6. 结语\"></a>6. 结语</h2><p>至此，一个视频点播页面就做好了，该方法适用于一切提供iframe嵌入的视频平台，页面展示如下：</p>\n<p><img src=\"https://unpkg.com/justlovesmile-img/20220504110304.png\"></p>\n","categories":[{"name":"博客相关","path":"api/categories/博客相关.json"}],"tags":[{"name":"前端","path":"api/tags/前端.json"},{"name":"Hexo","path":"api/tags/Hexo.json"}]}