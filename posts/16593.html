<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>大学课程 | 计算机图形学，基于MFC和二维变换的画图软件 | Justlovesmile's BLOG</title><meta name="keywords" content="大学课程,计算机图形学,MFC"><meta name="author" content="Justlovesmile,865717150@qq.com"><meta name="copyright" content="Justlovesmile"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="我终于肝完了计算机图形学的作业，记录一下我的报告   报告里面没有代码，不过上传到github了  Github链接🔗 Gitee链接🔗  基于MFC和二维变换的画图软件摘  要本文描述了二维复合变换的基本方法和思想，根据鼠标位置坐标获取起始点pStart和终止点pEnd的坐标，设计实现每个基本图形的画图方法，根据pStart和pEnd即可确定基本图形的控制点，进而绘制对应图形。规范化齐次坐标">
<meta property="og:type" content="article">
<meta property="og:title" content="大学课程 | 计算机图形学，基于MFC和二维变换的画图软件">
<meta property="og:url" content="https://blog.justlovesmile.top/posts/16593.html">
<meta property="og:site_name" content="Justlovesmile&#39;s BLOG">
<meta property="og:description" content="我终于肝完了计算机图形学的作业，记录一下我的报告   报告里面没有代码，不过上传到github了  Github链接🔗 Gitee链接🔗  基于MFC和二维变换的画图软件摘  要本文描述了二维复合变换的基本方法和思想，根据鼠标位置坐标获取起始点pStart和终止点pEnd的坐标，设计实现每个基本图形的画图方法，根据pStart和pEnd即可确定基本图形的控制点，进而绘制对应图形。规范化齐次坐标">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200619203709.png">
<meta property="article:published_time" content="2020-06-19T12:28:14.000Z">
<meta property="article:modified_time" content="2020-06-19T12:28:14.000Z">
<meta property="article:author" content="Justlovesmile">
<meta property="article:tag" content="大学课程">
<meta property="article:tag" content="计算机图形学">
<meta property="article:tag" content="MFC">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200619203709.png"><link rel="shortcut icon" href="/img/logo.jpg"><link rel="canonical" href="https://blog.justlovesmile.top/posts/16593"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//hm.baidu.com"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://npm.elemecdn.com/justlovesmile-static/icon/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/justlovesmile-static/js/SnackBar-0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/justlovesmile-static/js/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?a2ee893562999ebad688b0d82daa100a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://npm.elemecdn.com/justlovesmile-static/font/Titillium.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":500},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":200,"languages":{"author":"作者: Justlovesmile","link":"链接: ","source":"来源: Justlovesmile's BLOG","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"var(--mj-card-bg)","bgDark":"var(--mj-card-bg)","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '大学课程 | 计算机图形学，基于MFC和二维变换的画图软件',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-06-19 20:28:14'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://npm.elemecdn.com/justlovesmile-static/icon/font-awesome-4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="https://npm.elemecdn.com/justlovesmile-static/icon/font-awesome-animation-1.1.1/css/font-awesome-animation.min.css"><link rel="stylesheet" href="https://npm.elemecdn.com/justlovesmile-static/js/swiper-8.1.4/swiper-bundle.min.css"><link rel="stylesheet" href="/css/justlovesmile.css"><link rel="stylesheet" href="/css/blogicon.css"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Justlovesmile's BLOG" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">86</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">58</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><span> 文库</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-calendar"></i><span> 文章列表</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 全部标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 全部分类</span></a></li><li><a class="site-page child" href="/random/"><i class="fa-fw fas fa-shoe-prints"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><span> 导航</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/laboratory/"><i class="fa-fw fa fa-lightbulb-o"></i><span> 项目展示</span></a></li><li><a class="site-page child" href="/friends/"><i class="fa-fw fas fa-paper-plane"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/fcircle/"><i class="fa-fw fa fa-puzzle-piece"></i><span> 友链订阅</span></a></li><li><a class="site-page child" href="/focus/"><i class="fa-fw fa fa-check-square-o"></i><span> 博主关注</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><span> 网站</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/guestbook/"><i class="fa-fw fas fa-pencil-alt"></i><span> 留言信箱</span></a></li><li><a class="site-page child" href="/charts/"><i class="fa-fw fa fa-pie-chart"></i><span> 博客统计</span></a></li><li><a class="site-page child" href="/donate/"><i class="fa-fw fa fa-gratipay"></i><span> 博客打赏</span></a></li><li><a class="site-page child" href="/update/"><i class="fa-fw fa fa-list-ul"></i><span> 更新日志</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/photos/"><i class="fa-fw fas fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/video/"><i class="fa-fw fa fa-video-camera"></i><span> 视频</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 歌单</span></a></li><li><a class="site-page child" href="/love/"><i class="fa-fw fa fa-heart"></i><span> Love</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><span> 关于</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-user"></i><span> 本站</span></a></li><li><a class="site-page child" href="/essay/"><i class="fa-fw fa fa-commenting-o"></i><span> 哔哔</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200619203709.png')"><nav id="nav"><div id="nav-group"><div id="blog_name"><a id="site-name" href="/"><span id="site-name-icon">Justlovesmile</span></a></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><span> 文库</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-calendar"></i><span> 文章列表</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 全部标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 全部分类</span></a></li><li><a class="site-page child" href="/random/"><i class="fa-fw fas fa-shoe-prints"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><span> 导航</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/laboratory/"><i class="fa-fw fa fa-lightbulb-o"></i><span> 项目展示</span></a></li><li><a class="site-page child" href="/friends/"><i class="fa-fw fas fa-paper-plane"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/fcircle/"><i class="fa-fw fa fa-puzzle-piece"></i><span> 友链订阅</span></a></li><li><a class="site-page child" href="/focus/"><i class="fa-fw fa fa-check-square-o"></i><span> 博主关注</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><span> 网站</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/guestbook/"><i class="fa-fw fas fa-pencil-alt"></i><span> 留言信箱</span></a></li><li><a class="site-page child" href="/charts/"><i class="fa-fw fa fa-pie-chart"></i><span> 博客统计</span></a></li><li><a class="site-page child" href="/donate/"><i class="fa-fw fa fa-gratipay"></i><span> 博客打赏</span></a></li><li><a class="site-page child" href="/update/"><i class="fa-fw fa fa-list-ul"></i><span> 更新日志</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/photos/"><i class="fa-fw fas fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/video/"><i class="fa-fw fa fa-video-camera"></i><span> 视频</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 歌单</span></a></li><li><a class="site-page child" href="/love/"><i class="fa-fw fa fa-heart"></i><span> Love</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><span> 关于</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-user"></i><span> 本站</span></a></li><li><a class="site-page child" href="/essay/"><i class="fa-fw fa fa-commenting-o"></i><span> 哔哔</span></a></li></ul></div></div></div><div id="nav-right"><div id="search-button"><a class="nav-rightbutton site-page social-icon search"><i class="fas fa-search fa-fw"></i></a></div><div id="darkmode_navswitch"><a class="nav-rightbutton site-page darkmode_switchbutton" onclick="switchDarkMode()"><i class="fas fa-adjust"></i></a></div><div id="toggle-menu"><a class="nav-rightbutton site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div class="coverdiv" id="coverdiv"><img class="cover entered loading" id="post-cover" alt="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200619203709.png"></div><div id="post-info"><div class="post-firstinfo" id="post-meta"><span class="post-meta-categories"><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/">#大学课程</a><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6/">#计算机图形学</a><a class="post-meta__tags" href="/tags/MFC/">#MFC</a></div></div><h1 class="post-title">大学课程 | 计算机图形学，基于MFC和二维变换的画图软件</h1><div id="post-meta"><div class="meta-firstline"><span class="meta-share-time"><span class="meta-avatar"><a class="meta-avatar-img" href="/about/" title="关于作者"><img alt="作者头像" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg"></a><a class="meta-avatar-name" href="/about/" title="关于作者">Justlovesmile</a></span></span><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2020-06-19T12:28:14.000Z" title="发表于 2020-06-19 20:28:14">2020-06-19</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>14分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>我终于肝完了计算机图形学的作业，记录一下我的报告</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200619203709.png" style="max-width:75%;">

<p>报告里面没有代码，不过上传到github了</p>
<ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/Justlovesmile/MFC-WORK">Github链接🔗</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://gitee.com/justlovesmile/MFC-WORK">Gitee链接🔗</a></li>
</ul>
<h1 id="基于MFC和二维变换的画图软件"><a href="#基于MFC和二维变换的画图软件" class="headerlink" title="基于MFC和二维变换的画图软件"></a>基于MFC和二维变换的画图软件</h1><h2 id="摘-要"><a href="#摘-要" class="headerlink" title="摘  要"></a>摘  要</h2><p>本文描述了二维复合变换的基本方法和思想，根据鼠标位置坐标获取起始点pStart和终止点pEnd的坐标，设计实现每个基本图形的画图方法，根据pStart和pEnd即可确定基本图形的控制点，进而绘制对应图形。规范化齐次坐标以后，图形几何变换可以表示为图形控制点点集合的规范化齐次坐标矩阵与二维变换矩阵相乘的形式，分别设置二维变换矩阵的参数信息，设计实现对应的方法，即可实现图形的二维变换功能。</p>
<h2 id="设-计"><a href="#设-计" class="headerlink" title="设 计"></a>设 计</h2><p>“基于二维复合变换的动画制作软件”的设计中包括以下几个部分：(1) 程序结构设计，(2)鼠标消息映射，(3) 图形绘制实现，(4) 图形变换,（5）动画扩展实现,（6）信息保存,(7)程序交互设计。</p>
<h3 id="1-程序总体结构"><a href="#1-程序总体结构" class="headerlink" title="1 程序总体结构"></a>1 程序总体结构</h3><h4 id="1-1-总体结构设计"><a href="#1-1-总体结构设计" class="headerlink" title="1.1 总体结构设计"></a>1.1 总体结构设计</h4><h5 id="1-1-1-绘图设计"><a href="#1-1-1-绘图设计" class="headerlink" title="1.1.1 绘图设计"></a>1.1.1 绘图设计</h5><p>基本图形包括点，直线，曲线，自由画笔，矩形，圆形，椭圆，三角形，左箭头，上箭头，五角星，四角形，五边形共12钟类型，每个基本图形都有自己的编号，用户在选择基本图形后，被选择图形的编号信息保存到dstyle变量中，绘图模块即可根据dstyle中的编号绘制相应的图形。图形大小，位置信息由全局变量pStart和pEnd控制，pStart和pEnd分别为用户在窗口内拖动鼠标时的起点坐标和终点坐标。根据两个坐标确定一个矩形，按照比例，设置相应的控制点，再根据控制点即可绘制相应图形。绘图流程图见图1.1。</p>
<h5 id="1-1-2-变换设计"><a href="#1-1-2-变换设计" class="headerlink" title="1.1.2 变换设计"></a>1.1.2 变换设计</h5><p>图形变换包括图形移动，图形旋转，图形放缩。绘图模块绘制图形结束后，会将pStart，pEnd，style等基本信息存入图表中。例如，选择旋转类型后，执行对应函数，将图表中所有图形的位置信息修改，再执行重绘函数，按照点表内容依次重绘变换之后的图形，即可实现图形的旋转变换。变换流程图见图1.2。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200619203701.png"></p>
<p>图1.1 绘图流程图</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200619203702.png"></p>
<p>图1.2 变换流程图</p>
<h3 id="2-程序实现"><a href="#2-程序实现" class="headerlink" title="2 程序实现"></a>2 程序实现</h3><h4 id="2-1-鼠标绘图的消息映射"><a href="#2-1-鼠标绘图的消息映射" class="headerlink" title="2.1 鼠标绘图的消息映射"></a>2.1 鼠标绘图的消息映射</h4><p>为了实现基本图形的绘制和组合，需要在项目的视图View类中定义鼠标左键按下OnLButtonDown，鼠标移动OnMouseMove，以及鼠标左键抬起OnLButtonUp的消息映射，以实现拖动鼠标绘图功能。当鼠标左键按下时，设置一个变量为true保存绘图状态并且记录按下时的点，记为pStart，只有当该变量为true时，鼠标移动时才会将绘图，当鼠标左键抬起时，该变量赋值为false,并保存此时的点，记为pEnd。<br>其中，在鼠标左键按下并移动时，使用橡皮筋技术，即移动过程中选用画笔颜色取反模式（SetROP2(R2_NOT)），即可消除移动过程中不断绘制的图形，在鼠标左键抬起时，设置画笔为颜色覆盖模式（SETROP2(R2_COPYPEN)），绘制最终的图形，并保存pStart点和pEnd点，以及笔的粗细，形状，颜色等其他信息。</p>
<h4 id="2-2-图形绘制实现"><a href="#2-2-图形绘制实现" class="headerlink" title="2.2 图形绘制实现"></a>2.2 图形绘制实现</h4><h5 id="2-2-1-点"><a href="#2-2-1-点" class="headerlink" title="2.2.1 点"></a>2.2.1 点</h5><p>由于单个点的像素太小，不利于在图形绘制中使用与观察。这里使用了画一个微型填充圆的方法代替原始像素点。</p>
<h5 id="2-2-2-直线"><a href="#2-2-2-直线" class="headerlink" title="2.2.2 直线"></a>2.2.2 直线</h5><p>从直线起的以下图形的绘制均为根据外接矩形绘制内部图形。绘制图形时，当点击鼠标左键时获取矩形起点，按住不放拖动鼠标直至放开左键，放开鼠标左键的位置记录为矩形的终点。直线的绘制则根据矩形起始点使用MoveTo()和LineTo()函数绘制。</p>
<h5 id="2-2-3-等腰和直角三角形"><a href="#2-2-3-等腰和直角三角形" class="headerlink" title="2.2.3 等腰和直角三角形"></a>2.2.3 等腰和直角三角形</h5><p>在使用鼠标拉取的矩形中选取点位置并用画线函数连接点实现。三角形包括3个顶点。拉取矩形的起点坐标为(pStart.x,pStart.y),终点坐标为(pEnd.x,pEnd.y)。根据两种三角形在矩形中绘制时的对应比例，等腰三角形3个顶点坐标分别为：<br>P1  (pStart.x+pEnd.x)/2,pStart.y);<br>P2  (pStart.x,pEnd.y);<br>P3  (pEnd.x,pEnd.y);<br>直角三角形的三个顶点坐标为：<br>P1  (pStart.x,pStart.y);<br>P2  (pEnd.x,pEnd.y);<br>P3  (pStart.x,pEnd.y);</p>
<h5 id="2-2-4-矩形和填充矩形"><a href="#2-2-4-矩形和填充矩形" class="headerlink" title="2.2.4 矩形和填充矩形"></a>2.2.4 矩形和填充矩形</h5><p>在使用鼠标拉取的矩形中获取了起始点和终止点后用矩形函数实现。拉取矩形的起点坐标为(pStart.x,pStart.y),终点坐标为(pEnd.x,pEnd.y)。要绘制矩形由绘制矩形的函数实现pdc-&gt;Rectangle(pStart.x , pStart.y , pEnd.x,  pEnd.y)。绘制填充矩形则在绘制前使用画刷以填充内部。</p>
<h5 id="2-2-5-圆形和填充圆"><a href="#2-2-5-圆形和填充圆" class="headerlink" title="2.2.5 圆形和填充圆"></a>2.2.5 圆形和填充圆</h5><p>在使用鼠标拉取的矩形中获取了起始点后。将两点间的距离作为要画圆的半径r。使用绘制圆函数进行绘制pdc-&gt;Ellipse(pStart.x-r,pStart.y-r , pStart.x+r , pStart.y+r)。绘制填充矩形则在绘制前使用画刷以填充内部。</p>
<h5 id="2-2-6-自由画笔"><a href="#2-2-6-自由画笔" class="headerlink" title="2.2.6 自由画笔"></a>2.2.6 自由画笔</h5><p>在鼠标左键按下，并且移动的过程中，通过不断触发OnMouseMove消息映射，在移动中的点的位置和上一个位置间连线，即可实现自由画笔功能。</p>
<h5 id="2-2-7-左箭头"><a href="#2-2-7-左箭头" class="headerlink" title="2.2.7 左箭头"></a>2.2.7 左箭头</h5><p>在使用鼠标拉取的矩形中选取点位置并用画线函数连接点实现。左箭头包括7个顶点。拉取矩形的起点坐标为(pStart.x,pStart.y),终点坐标为(pEnd.x,pEnd.y)。根据左箭头在矩形中绘制时的对应比例，7个顶点坐标为：<br>P1  (pStart.x, pStart.y-dy/2);<br>P2  (pStart.x+dx/2),pStart.y);<br>P3  (pStart.x+dx/2), pStart.y-dy/4);<br>P4  (pEnd.x, pStart.y-dy/4);<br>P5  (pEnd.x, pStart.y-3*dy/4);<br>P6  (pStart.x+dx/2), pStart.y-3*dy/4);<br>P7  (pStart.x+dx/2),pEnd.y);<br>其中dy=pStart.y-pEnd.y;dx= pEnd.x-pStart.x</p>
<h5 id="2-2-8-上箭头"><a href="#2-2-8-上箭头" class="headerlink" title="2.2.8 上箭头"></a>2.2.8 上箭头</h5><p>在使用鼠标拉取的矩形中选取点位置并用画线函数连接点实现。上箭头包括7个顶点。拉取矩形的起点坐标为(pStart.x,pStart.y),终点坐标为(pEnd.x,pEnd.y)。根据上箭头在矩形中绘制时的对应比例，7个顶点坐标为：<br>P1  (pStart.x, pStart.y-dy0/2);<br>P2  ( (pStart.x+dx0/2,pStart.y);<br>P3  (pEnd.x, pStart.y-dy0/2);<br>P4  (pStart.x+3*dx0/4, pStart.y-dy0/2);<br>P5  (pStart.x+3*dx0/4,pEnd.y);<br>P6  (pStart.x+dx0/4,pEnd.y);<br>P7  (pStart.x+dx0/4, pStart.y-dy0/2);<br>其中dy0=pStart.y-pEnd.y;dx0=pEnd.x-pStart.x</p>
<h5 id="2-2-9-五角星"><a href="#2-2-9-五角星" class="headerlink" title="2.2.9 五角星"></a>2.2.9 五角星</h5><p>在使用鼠标拉取的矩形中选取点位置并用画线函数连接点实现。五角星绘制包括5个顶点。拉取矩形的起点坐标为(pStart.x,pStart.y),终点坐标为(pEnd.x,pEnd.y)。根据五角星在矩形中绘制时的对应比例，5个顶点坐标为：<br>P1(pStart.x+pEnd.x)/2),pStart.y);<br>P2(pStart.x+RX*(sin(72*pi/180)cos(54*pi/180))/2/sin(72*pi/180)),pEnd.y);<br>P3(pEnd.x, pStart.y+RY*(1-cos(72*pi/180))/(1+sin(54*pi/180)));<br>P4(pStart.x, pStart.y+RY*(1-cos(72*pi/180))/(1+sin(54*pi/180)));<br>P5(pStart.x+RX*(sin(72*pi/180)+cos(54*pi/180))/2/sin(72*pi/180),pEnd.y);<br>其中pi = 3.1415926;RX = -(pStart.x-pEnd.x);RY = -(pStart.y-pEnd.y);</p>
<h5 id="2-2-10-五边形"><a href="#2-2-10-五边形" class="headerlink" title="2.2.10 五边形"></a>2.2.10 五边形</h5><p>在使用鼠标拉取的矩形中选取点位置并用画线函数连接点实现。五边形包括5个顶点。拉取矩形的起点坐标为(pStart.x,pStart.y),终点坐标为(pEnd.x,pEnd.y)。根据五边形在矩形中绘制时的对应比例，5个顶点坐标为：<br>P1  (pStart.x+pEnd.x)/2,pStart.y);<br>P2  (pStart.x,(pEnd.y-pStart.y)*0.41+pStart.y);<br>P3  (pStart.x+(pEnd.x - pStart.x)*0.19,pEnd.y);<br>P4  (pStart.x+(pEnd.x - pStart.x)*0.81,pEnd.y);<br>P5  (pEnd.x, (pEnd.y-pStart.y)*0.41+pStart.y);</p>
<h5 id="2-2-11-四角星"><a href="#2-2-11-四角星" class="headerlink" title="2.2.11 四角星"></a>2.2.11 四角星</h5><p>在使用鼠标拉取的矩形中选取点位置并用画线函数连接点实现。四角星包括8个顶点。拉取矩形的起点坐标为(pStart.x,pStart.y),终点坐标为(pEnd.x,pEnd.y)。根据四角星在矩形中绘制时的对应比例，8个顶点坐标为：<br>P1  ((pStart.x+pEnd.x)/2,pStart.y)<br>P2  (pStart.x+(pEnd.x-pStart.x)*3/8,(pEnd.y-pStart.y)* 3/8+pStart.y);<br>P3  (pStart.x,(pStart.y+pEnd.y)/2);<br>P4  (pStart.x+(pEnd.x-pStart.x)* 3/8,(pEnd.y-pStart.y)*6/8+pStart.y);<br>P5  ((pStart.x + pEnd.x)/2),pEnd.y);<br>P6  (pStart.x+(pEnd.x-pStart.x)* 6/8,(pEnd.y-pStart.y)*6/8+pStart.y);<br>P7  (pEnd.x,(pStart.y+pEnd.y)/2);<br>P8  (pStart.x+(pEnd.x-pStart.x)*6/8,(pEnd.y-pStart.y)*3/8+pStart.y);</p>
<h5 id="2-2-12-弧线"><a href="#2-2-12-弧线" class="headerlink" title="2.2.12 弧线"></a>2.2.12 弧线</h5><p>在使用鼠标拉取的矩形中获取了起始点后,使用绘制椭圆弧线函数进行绘制pdc-&gt;Arc(pStart.x,pStart.y,pEnd.x,pEnd.y,int((pStart.x+pEnd.x)/2),pStart.y,pEnd.x,int((pStart.y+pEnd.y)/2));</p>
<h4 id="2-3-图形变换实现"><a href="#2-3-图形变换实现" class="headerlink" title="2.3 图形变换实现"></a>2.3 图形变换实现</h4><h5 id="2-3-1-图形移动"><a href="#2-3-1-图形移动" class="headerlink" title="2.3.1 图形移动"></a>2.3.1 图形移动</h5><p>图形移动包括包括左移，右移和上移，下移，点表中存有每个图形的pStart点，pEnd点和其他样式信息，绘图函数可根据这些信息重新绘制对应图形，所以只要调用transform.tranlate()函数将pStart，pEnd的x，y坐标同时增加减少相同数值即可完成图形的上下左右移动。</p>
<h5 id="2-3-2-图形旋转"><a href="#2-3-2-图形旋转" class="headerlink" title="2.3.2 图形旋转"></a>2.3.2 图形旋转</h5><p>图形旋转包括顺时针旋转和逆时针旋转。与其他的变换不同的是，旋转需要定义一个旋转中心，默认为坐标系原点。如果没有设置旋转中心，旋转变换可能会导致图形变换到窗口之外，所以设置坐标点(pStart+pEnd)/2为旋转中心，调用Transform.Rotate()函数，即可实现在原位置旋转变换。</p>
<h5 id="2-3-3-图形放缩"><a href="#2-3-3-图形放缩" class="headerlink" title="2.3.3 图形放缩"></a>2.3.3 图形放缩</h5><p>图形放大和缩小是由pStart和pEnd坐标的等比变换实现的。每次放大，将pStart和pEnd的x，y坐标放大两倍，每次缩小将pStart和pEnd的x，y坐标设置为原来的1/2。经过多次放缩后，可能导致图形太大或者太小而不能正常显示的问题，所以每次放缩判断pStart和pEnd之间的距离，如果距离大于窗口距离，或距离小于5个像素则终止放缩并给出相应提示。</p>
<h5 id="2-4-图形变换扩展"><a href="#2-4-图形变换扩展" class="headerlink" title="2.4 图形变换扩展"></a>2.4 图形变换扩展</h5><h5 id="2-4-1-动画设计"><a href="#2-4-1-动画设计" class="headerlink" title="2.4.1 动画设计"></a>2.4.1 动画设计</h5><p>通过自定义文本对话框类（Cchoosedig），实现通过输入框输入获取复合图形变换运动时间的功能，基于原有的图形变化函数，增加根据输入时间循环移动以及延时（Sleep()）的功能，即实现了自定义动画时间的动画制作。</p>
<h5 id="2-4-2-自定义点表结构"><a href="#2-4-2-自定义点表结构" class="headerlink" title="2.4.2 自定义点表结构"></a>2.4.2 自定义点表结构</h5><p>由于动画制作需要修改组合复杂图形的所有点的信息，因此需要遍历点集，再重绘所有图形，因此，自定义了一个结构体，用来存储每一个图形的信息，其中信息包括：起始点，终止点，图形类型，画笔类型，画笔粗细，画笔颜色，结构体如图2.1，然后为这个结构体创建链表，再修改文档类的串行化Serialize函数即可。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200619203703.png"></p>
<p>图2.1 自定义结构体</p>
<h5 id="2-4-3-运动时间设置"><a href="#2-4-3-运动时间设置" class="headerlink" title="2.4.3 运动时间设置"></a>2.4.3 运动时间设置</h5><p>为了自定义运动时间，采用了文本对话框，通过输入运动时间，从对话框获取信息，保存到变量，再传递到View类，实现动画制作功能。时间设置效果如图2.2所示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200619203704.png"></p>
<p>图2.2 运动时间设置</p>
<h5 id="2-4-4-图形重绘"><a href="#2-4-4-图形重绘" class="headerlink" title="2.4.4 图形重绘"></a>2.4.4 图形重绘</h5><p>对于图形重绘，先暂存当前所选择的图形类型，画笔，颜色等信息，再获取点表的长度，然后循环遍历点表，取出点表中的数据，赋值给CDC类的指针对象pdc，根据图形类型和其他信息画出所有对应的图形。最后恢复之前暂存的信息，即可实现图形重绘功能，且不影响当前选择的样式。</p>
<h5 id="2-5-程序交互实现"><a href="#2-5-程序交互实现" class="headerlink" title="2.5 程序交互实现"></a>2.5 程序交互实现</h5><h5 id="2-5-1-绘图类型选择"><a href="#2-5-1-绘图类型选择" class="headerlink" title="2.5.1 绘图类型选择"></a>2.5.1 绘图类型选择</h5><p>通过点击菜单栏的图标按钮，如图2.3所示，可以设置绘制图形的类型。具体实现是，当按钮被点击，调用相应的响应函数设置dstyle，并设置cclick为false即可。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200619203705.png"></p>
<p>图2.3 菜单栏中选择绘图类型的按钮</p>
<h5 id="2-5-2-画笔颜色选择"><a href="#2-5-2-画笔颜色选择" class="headerlink" title="2.5.2 画笔颜色选择"></a>2.5.2 画笔颜色选择</h5><p>颜色设置是调用系统自带的颜色对话框（CColorDialog）完成对画笔、画刷颜色的选择，同时选用该对话框能够实现自定义颜色。颜色选择对话框如图2.4所示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200619203706.png"></p>
<p>图2.4 颜色选择对话框</p>
<h5 id="2-5-3-画笔类型选择"><a href="#2-5-3-画笔类型选择" class="headerlink" title="2.5.3 画笔类型选择"></a>2.5.3 画笔类型选择</h5><p>在菜单栏中，有画笔形状和画笔粗细可以选择。其中，画笔形状包含包含直线（PS_SOLID），点线（PS_DOT），虚线（PS_DASH），画笔粗细包括粗线，标准线和细线。根据选择的画笔类型，设置type和thickness的值即可。其中，画笔形状中的虚线和点线只有在画笔粗细为细线的时候才能正常显示，当画笔粗细为标准或者粗线时，画出来的都是实线。</p>
<h5 id="2-5-4-清屏"><a href="#2-5-4-清屏" class="headerlink" title="2.5.4 清屏"></a>2.5.4 清屏</h5><p>在清屏时，首先会有弹窗提示是否确定清屏，点击“否”则取消操作，点击“是”则进行清屏。清屏功能的具体操作是先调用RedrawWindow()函数清屏，然后清空点表MyList并设置dstyle和cclick分别为初始值0和false即可。</p>
<h5 id="2-5-5-回退"><a href="#2-5-5-回退" class="headerlink" title="2.5.5 回退"></a>2.5.5 回退</h5><p>由于本项目把每个图形外接矩形的一对顶点保存在了点表MyList中的一个自定义的节点结构体中，所以在回退时，我们只需要删除点表中的最后一个节点，然后根据点表重新绘图即可。</p>
<h3 id="3-程序运行效果"><a href="#3-程序运行效果" class="headerlink" title="3 程序运行效果"></a>3 程序运行效果</h3><h4 id="3-1-基本图形实现"><a href="#3-1-基本图形实现" class="headerlink" title="3.1 基本图形实现"></a>3.1 基本图形实现</h4><p>设计实现了包含点，直线段，椭圆弧线，矩形，填充矩形，等腰三角形，直角三角形，椭圆，圆，填充圆，五边形，五角星，四角星，箭头等多种基础图形，并且实现画图以及选择画笔类型功能，初始窗口如图3.1所示，基础图形效果如图3.2所示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200619203707.png"></p>
<p>图3.1 初始窗口</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200619203708.png"></p>
<p>图3.2 基础图形效果</p>
<h4 id="3-2-组合复杂图形以及整体变换"><a href="#3-2-组合复杂图形以及整体变换" class="headerlink" title="3.2 组合复杂图形以及整体变换"></a>3.2 组合复杂图形以及整体变换</h4><p>实现了基本图形组合成复杂图形的功能，并且具有回退，清空画布，颜色等功能，具有包含平移，旋转，放大缩小，输入动画时长的功能。组合复杂图形以及变换效果如图3.3所示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200619203709.png"></p>
<p>图3.3 组合复杂图形及变换</p>
<h3 id="4-结论"><a href="#4-结论" class="headerlink" title="4 结论"></a>4 结论</h3><p>通过这次的计算机图形学实践，我们熟悉了计算机是如何利用算法来生成，处理和显示图形的，学习了如何通过使用Visual C++ 6.0编程环境的MFC框架进行计算机图形学的编程。在程序编写的过程中，我们掌握了很多MFC库所提供的类及其功能函数的使用方法，也根据项目的需要编写了很多自定义的结构体和功能函数。在实验的过程中，我们逐渐了解了MFC框架中，不同类的功能和定义方法，明白了双缓冲机制的原理，熟悉了基本的消息映射功能和对话框的设计，以及如何在不同类间传递数据的方法。并且，在动画制作的过程中，我们又进一步加强了对于二维变化的理解，知道了图形变化的本质还是数学计算。在老师的帮助和我们小组的努力下，我们的收获是如此巨大，我们相信在今后的学习生活中，图形学的原理知识将会给我们很大的帮助。</p>
</article><div class="post-reward"><div class="reward-button"><i class="fas fa-hamburger"></i> 打赏作者</div><div class="reward-main"><ul class="reward-all"><ul class="reward-group"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/wechat.jpg" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/alipay.jpg" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/donate"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></ul></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/">大学课程</a><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6/">计算机图形学</a><a class="post-meta__tags" href="/tags/MFC/">MFC</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200619203709.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://npm.elemecdn.com/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://npm.elemecdn.com/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-info">大学课程 | 计算机图形学，基于MFC和二维变换的画图软件</span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://blog.justlovesmile.top/posts/16593.html">https://blog.justlovesmile.top/posts/16593.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="external nofollow noopener noreferrer">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.justlovesmile.top" target="_blank">Justlovesmile's BLOG</a>！</span></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/14495.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20200624120328.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">大学课程 | 嵌入式智能大棚监测管理系统</div></div></a></div><div class="next-post pull-right"><a href="/posts/14357.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/image/221228-15574975489aa1.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Hexo博客 | 给博客导航栏添加二级菜单</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/a806bebe.html" title="推荐 | 计算机专业，大学课程「笔记归档」"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20220331192754.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-31</div><div class="title">推荐 | 计算机专业，大学课程「笔记归档」</div></div></a></div><div><a href="/posts/651e6a0b.html" title="大学课程 | 计算机系统结构精简知识点"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/image/1584111180-soft.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-09-08</div><div class="title">大学课程 | 计算机系统结构精简知识点</div></div></a></div><div><a href="/posts/43666.html" title="大学课程 | 《微机原理与接口技术》笔记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/image/1584110553-u34116618882606377503fm11gp0.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-09-05</div><div class="title">大学课程 | 《微机原理与接口技术》笔记</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info__name">Justlovesmile</div><div class="author-info__description">一个计算机专业学生的个人博客，记录着学习笔记和生活中的思考，期待着和所有人相遇</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">86</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">58</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div></div><!--if(theme.social)--><!--    .card-info-social-icons.is-center--><!--      !=fragment_cache('social', function(){return partial('includes/header/social')}) --></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content"><p>不定时更新博客，欢迎交换<a href="/friends/"><strong>友链</strong></a>...</p><div class="twopeople"><div class="container" style="height:200px;"><canvas class="illo" width="800" height="800" style="max-width:200px;max-height:200px;touch-action:none;width:640px;height:640px;"></canvas></div><script src="https://npm.elemecdn.com/justlovesmile-static/js/twopeople1.js"></script><script src="https://npm.elemecdn.com/justlovesmile-static/js/zdog.dist.js"></script><script id="rendered-js" src="https://npm.elemecdn.com/justlovesmile-static/js/twopeople.js"></script><style>.twopeople{margin:0;align-items:center;justify-content:center;text-align:center;}canvas{display:block;margin:0 auto;cursor:move;}</style></div><div style="text-align:center;"><a href="https://www.foreverblog.cn/" target="_blank" rel="external nofollow noopener noreferrer"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.foreverblog.cn/logo_en_default.png" alt="foreverblog" style="width:auto;height:16px;"></a></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EMFC%E5%92%8C%E4%BA%8C%E7%BB%B4%E5%8F%98%E6%8D%A2%E7%9A%84%E7%94%BB%E5%9B%BE%E8%BD%AF%E4%BB%B6"><span class="toc-text">基于MFC和二维变换的画图软件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%91%98-%E8%A6%81"><span class="toc-text">摘  要</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE-%E8%AE%A1"><span class="toc-text">设 计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%A8%8B%E5%BA%8F%E6%80%BB%E4%BD%93%E7%BB%93%E6%9E%84"><span class="toc-text">1 程序总体结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E6%80%BB%E4%BD%93%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1"><span class="toc-text">1.1 总体结构设计</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-1-%E7%BB%98%E5%9B%BE%E8%AE%BE%E8%AE%A1"><span class="toc-text">1.1.1 绘图设计</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-2-%E5%8F%98%E6%8D%A2%E8%AE%BE%E8%AE%A1"><span class="toc-text">1.1.2 变换设计</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%A8%8B%E5%BA%8F%E5%AE%9E%E7%8E%B0"><span class="toc-text">2 程序实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E9%BC%A0%E6%A0%87%E7%BB%98%E5%9B%BE%E7%9A%84%E6%B6%88%E6%81%AF%E6%98%A0%E5%B0%84"><span class="toc-text">2.1 鼠标绘图的消息映射</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.2 图形绘制实现</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-1-%E7%82%B9"><span class="toc-text">2.2.1 点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-2-%E7%9B%B4%E7%BA%BF"><span class="toc-text">2.2.2 直线</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-3-%E7%AD%89%E8%85%B0%E5%92%8C%E7%9B%B4%E8%A7%92%E4%B8%89%E8%A7%92%E5%BD%A2"><span class="toc-text">2.2.3 等腰和直角三角形</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-4-%E7%9F%A9%E5%BD%A2%E5%92%8C%E5%A1%AB%E5%85%85%E7%9F%A9%E5%BD%A2"><span class="toc-text">2.2.4 矩形和填充矩形</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-5-%E5%9C%86%E5%BD%A2%E5%92%8C%E5%A1%AB%E5%85%85%E5%9C%86"><span class="toc-text">2.2.5 圆形和填充圆</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-6-%E8%87%AA%E7%94%B1%E7%94%BB%E7%AC%94"><span class="toc-text">2.2.6 自由画笔</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-7-%E5%B7%A6%E7%AE%AD%E5%A4%B4"><span class="toc-text">2.2.7 左箭头</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-8-%E4%B8%8A%E7%AE%AD%E5%A4%B4"><span class="toc-text">2.2.8 上箭头</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-9-%E4%BA%94%E8%A7%92%E6%98%9F"><span class="toc-text">2.2.9 五角星</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-10-%E4%BA%94%E8%BE%B9%E5%BD%A2"><span class="toc-text">2.2.10 五边形</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-11-%E5%9B%9B%E8%A7%92%E6%98%9F"><span class="toc-text">2.2.11 四角星</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-12-%E5%BC%A7%E7%BA%BF"><span class="toc-text">2.2.12 弧线</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E5%9B%BE%E5%BD%A2%E5%8F%98%E6%8D%A2%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.3 图形变换实现</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-1-%E5%9B%BE%E5%BD%A2%E7%A7%BB%E5%8A%A8"><span class="toc-text">2.3.1 图形移动</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-2-%E5%9B%BE%E5%BD%A2%E6%97%8B%E8%BD%AC"><span class="toc-text">2.3.2 图形旋转</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-3-%E5%9B%BE%E5%BD%A2%E6%94%BE%E7%BC%A9"><span class="toc-text">2.3.3 图形放缩</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4-%E5%9B%BE%E5%BD%A2%E5%8F%98%E6%8D%A2%E6%89%A9%E5%B1%95"><span class="toc-text">2.4 图形变换扩展</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4-1-%E5%8A%A8%E7%94%BB%E8%AE%BE%E8%AE%A1"><span class="toc-text">2.4.1 动画设计</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%82%B9%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-text">2.4.2 自定义点表结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4-3-%E8%BF%90%E5%8A%A8%E6%97%B6%E9%97%B4%E8%AE%BE%E7%BD%AE"><span class="toc-text">2.4.3 运动时间设置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4-4-%E5%9B%BE%E5%BD%A2%E9%87%8D%E7%BB%98"><span class="toc-text">2.4.4 图形重绘</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-%E7%A8%8B%E5%BA%8F%E4%BA%A4%E4%BA%92%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.5 程序交互实现</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-1-%E7%BB%98%E5%9B%BE%E7%B1%BB%E5%9E%8B%E9%80%89%E6%8B%A9"><span class="toc-text">2.5.1 绘图类型选择</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-2-%E7%94%BB%E7%AC%94%E9%A2%9C%E8%89%B2%E9%80%89%E6%8B%A9"><span class="toc-text">2.5.2 画笔颜色选择</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-3-%E7%94%BB%E7%AC%94%E7%B1%BB%E5%9E%8B%E9%80%89%E6%8B%A9"><span class="toc-text">2.5.3 画笔类型选择</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-4-%E6%B8%85%E5%B1%8F"><span class="toc-text">2.5.4 清屏</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-5-%E5%9B%9E%E9%80%80"><span class="toc-text">2.5.5 回退</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C"><span class="toc-text">3 程序运行效果</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E5%9F%BA%E6%9C%AC%E5%9B%BE%E5%BD%A2%E5%AE%9E%E7%8E%B0"><span class="toc-text">3.1 基本图形实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E7%BB%84%E5%90%88%E5%A4%8D%E6%9D%82%E5%9B%BE%E5%BD%A2%E4%BB%A5%E5%8F%8A%E6%95%B4%E4%BD%93%E5%8F%98%E6%8D%A2"><span class="toc-text">3.2 组合复杂图形以及整体变换</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%BB%93%E8%AE%BA"><span class="toc-text">4 结论</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/809258ef.html" title="旋转目标检测 | R3Det，基于特征精炼的单阶段检测模型"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20220409151733.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="旋转目标检测 | R3Det，基于特征精炼的单阶段检测模型"></a><div class="content"><a class="title" href="/posts/809258ef.html" title="旋转目标检测 | R3Det，基于特征精炼的单阶段检测模型">旋转目标检测 | R3Det，基于特征精炼的单阶段检测模型</a><time datetime="2022-04-09T07:00:34.000Z" title="发表于 2022-04-09 15:00:34">2022-04-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/d90df99b.html" title="记录 | 博客运行超过1000天啦，继续砥砺前行"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20220408160335.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="记录 | 博客运行超过1000天啦，继续砥砺前行"></a><div class="content"><a class="title" href="/posts/d90df99b.html" title="记录 | 博客运行超过1000天啦，继续砥砺前行">记录 | 博客运行超过1000天啦，继续砥砺前行</a><time datetime="2022-04-08T06:18:58.000Z" title="发表于 2022-04-08 14:18:58">2022-04-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4c29d81e.html" title="目标检测 | FPN，多尺度目标检测经典Backbone"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20220408125903.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="目标检测 | FPN，多尺度目标检测经典Backbone"></a><div class="content"><a class="title" href="/posts/4c29d81e.html" title="目标检测 | FPN，多尺度目标检测经典Backbone">目标检测 | FPN，多尺度目标检测经典Backbone</a><time datetime="2022-04-08T04:46:28.000Z" title="发表于 2022-04-08 12:46:28">2022-04-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/286eabe4.html" title="小样本学习 | ProtoNet，基于度量的Few-Shot分类网络"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20220402124055.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="小样本学习 | ProtoNet，基于度量的Few-Shot分类网络"></a><div class="content"><a class="title" href="/posts/286eabe4.html" title="小样本学习 | ProtoNet，基于度量的Few-Shot分类网络">小样本学习 | ProtoNet，基于度量的Few-Shot分类网络</a><time datetime="2022-04-02T04:20:34.000Z" title="发表于 2022-04-02 12:20:34">2022-04-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a806bebe.html" title="推荐 | 计算机专业，大学课程「笔记归档」"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/20220331192754.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="推荐 | 计算机专业，大学课程「笔记归档」"></a><div class="content"><a class="title" href="/posts/a806bebe.html" title="推荐 | 计算机专业，大学课程「笔记归档」">推荐 | 计算机专业，大学课程「笔记归档」</a><time datetime="2022-03-31T11:03:19.000Z" title="发表于 2022-03-31 19:03:19">2022-03-31</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="social-icon" href="mailto:865717150@qq.com" target="_blank" title="Email" rel="external nofollow noopener noreferrer"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://blog.csdn.net/qq_43701912" target="_blank" title="CSDN" rel="external nofollow noopener noreferrer"><i class="iconfont icon-csdn1"></i></a><a class="social-icon" href="https://github.com/Justlovesmile" target="_blank" title="Github" rel="external nofollow noopener noreferrer"><i class="fab fa-github"></i></a><a class="social-icon" href="https://weibo.com/u/5252319712" target="_blank" title="微博" rel="external nofollow noopener noreferrer"><i class="fa fa-weibo"></i></a><a class="social-icon" href="https://space.bilibili.com/168738824" target="_blank" title="Bilibili" rel="external nofollow noopener noreferrer"><i class="fas iconfont icon-bilibili"></i></a></div><div id="mj-footer"><div class="footer-group"><h3 class="footer-title">推荐<i class="fa fa-fire" style="color:var(--mj-red);padding-left:5px;"></i></h3><div class="footer-links"><a class="footer-item" href="/tags/Hexo/">博客魔改</a><a class="footer-item" href="/tags/深度学习/">深度学习</a><a class="footer-item" href="/tags/大学课程/">大学课程</a><a class="footer-item" href="/tags/论文笔记/">论文笔记</a></div></div><div class="footer-group"><h3 class="footer-title">生活</h3><div class="footer-links"><a class="footer-item" href="/photos/">年度影集</a><a class="footer-item" href="/music/">音乐列表</a><a class="footer-item" href="/video/">视频剪辑</a><a class="footer-item" href="/essay/">日常哔哔</a></div></div><div class="footer-group"><h3 class="footer-title">网站</h3><div class="footer-links"><a class="footer-item" href="/guestbook/">留言信箱</a><a class="footer-item" href="/donate/">博客打赏</a><a class="footer-item" href="/charts/">博客统计</a><a class="footer-item" href="/update/">更新日志</a></div></div><div class="footer-group"><h3 class="footer-title">导航</h3><div class="footer-links"><a class="footer-item" target="_blank" rel="external nofollow noopener noreferrer" href="https://www.justlovesmile.top/">个人主页</a><a class="footer-item" href="/friends/">友情链接</a><a class="footer-item" href="/fcircle/">友链订阅</a><a class="footer-item" href="/atom.xml">RSS订阅<i class="fa fa-rss-square" style="color:var(--mj-lighttext);padding-left:5px;"></i></a></div></div><div class="footer-group"><h3 class="footer-title">协议</h3><div class="footer-links"><a class="footer-item" href="/privacy/">隐私协议</a><a class="footer-item" href="/cookies/">Cookies</a><a class="footer-item" href="/cc/">版权协议</a></div></div></div><div id="footer-banner"><div class="footer-banner-links"><div class="footer-banner-left"><div id="footer-banner-tips">©2019 - 2022 By Justlovesmile</div></div><div class="footer-banner-right"><a class="footer-banner-link" href="/update/">主题</a><a class="footer-banner-link" href="/about/">关于</a><a class="footer-banner-link" target="_blank" rel="external nofollow noopener noreferrer" href="http://beian.miit.gov.cn/">蜀ICP备20004960号</a></div></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="fa-solid fa-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="fa-solid fa-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="fa-solid fa-arrow-rotate-right"></i></div><div class="rightMenu-item" id="menu-home"><i class="fa-solid fa-house"></i></div></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" id="menu-random" href="/random/"><i class="fa-solid fa-shoe-prints"></i><span>随便逛逛</span></a><a class="rightMenu-item" id="menu-msg" href="/guestbook/"><i class="fa-fw fas fa-pencil-alt"></i><span>留言评论</span></a><div class="rightMenu-hr"></div><div class="rightMenu-item" id="menu-sharelink"><i class="fa fa-share"></i><span>分享本页</span></div><div class="rightMenu-item search" id="menu-search"><i class="fas fa-search fa-fw"></i><span>搜索文章</span></div><div class="rightMenu-item" id="menu-darkmode"><i class="fa-solid fa-moon"></i><span>明暗切换</span></div></div></div><div id="rightmenu-mask" onclick="RemoveRightMenu()"></div><script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script><script async="async" data-pjax="data-pjax" src="/js/rightmenu.js"></script><link rel="stylesheet" href="/css/rightmenu.css"><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script defer src="https://npm.elemecdn.com/justlovesmile-static/js/@fancyapps/ui/dist/fancybox.umd.js"></script><script defer src="https://npm.elemecdn.com/justlovesmile-static/js/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script defer src="https://npm.elemecdn.com/justlovesmile-static/js/SnackBar-0.1.16/dist/snackbar.min.js"></script><script defer src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'blog-comment-3gt33nkmf9f97e6e',
      region: 'ap-shanghai',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.vemoji)'))
      }
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'blog-comment-3gt33nkmf9f97e6e',
      region: 'ap-shanghai',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      document.getElementById('twikoo-count').innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><canvas id="universe"></canvas><script defer>console.log("\n %c 欢迎来到Justlovesmile の Blog %c https://github.com/Justlovesmile %c https://blog.justlovesmile.top \n","color: #f9ed69; background: #252a34; padding:5px 0;","background: #3fc1c9; padding:5px 0;","background: #3fc1c9; padding:5px 0;");</script><script defer src="/js/rgbaster.min.js"></script><script defer src="/js/justlovesmile.js"></script><script>window.addEventListener('load', async () => {navigator.serviceWorker.register(`/js/sw.js?time=${new Date().getTime()}`).then(async reg => {if (window.localStorage.getItem('install') != 'true') {window.localStorage.setItem('install', 'true');setTimeout(() => {window.location.search = `?time=${new Date().getTime()}`}, 1000)}}).catch(err => { })});</script></div></body></html>